<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Há»c HTML - Level Up</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        textarea { width: 80%; height: 100px; margin-top: 10px; }
        button { margin-top: 10px; padding: 10px; }
        .hidden { display: none; }
        #score {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ChÃ o má»«ng Ä‘áº¿n vá»›i KhÃ³a há»c HTML</h1>
    <h2 id="level-title">Nhiá»‡m vá»¥ Level 1: Viáº¿t tiÃªu Ä‘á»</h2>
    <p id="level-desc">Viáº¿t má»™t tháº» tiÃªu Ä‘á» &lt;h1&gt; vá»›i ná»™i dung "ChÃ o má»«ng Ä‘áº¿n vá»›i khÃ³a há»c HTML"</p>
    
    <textarea id="codeInput"></textarea><br>
    <button onclick="checkAnswer()">Ná»™p bÃ i</button>
    <p id="result"></p>
    <p id="score"></p>

    <script>
        let levels = [
            { desc: "Viáº¿t má»™t tháº» tiÃªu Ä‘á» <h1>ChÃ o má»«ng Ä‘áº¿n vá»›i khÃ³a há»c HTML</h1>", answer: "<h1>ChÃ o má»«ng Ä‘áº¿n vá»›i khÃ³a há»c HTML</h1>" },
            { desc: "ThÃªm hÃ¬nh áº£nh cÃ³ Ä‘Æ°á»ng dáº«n 'image.jpg'", answer: "<img src='image.jpg'>" },
            { desc: "Táº¡o danh sÃ¡ch<ul><li>Má»¥c 1</li><li>Má»¥c 2</li></ul>", answer: "<ul><li>Má»¥c 1</li><li>Má»¥c 2</li></ul>" },
            { desc: "Táº¡o báº£ng vá»›i 2 hÃ ng vÃ  2 cá»™t", answer: "<table><tr><td>1</td><td>2</td></tr><tr><td>3</td><td>4</td></tr></table>" },
            { desc: "ThÃªm liÃªn káº¿t vá»›i ná»™i dung 'Google' vÃ  Ä‘Æ°á»ng dáº«n 'https://google.com'", answer: "<a href='https://google.com'>Google</a>" }
        ];
        
        let currentLevel = localStorage.getItem("level") || 0;
        currentLevel = parseInt(currentLevel);
        let score = localStorage.getItem("score") || 0;
        score = parseInt(score);
        let attempts = JSON.parse(localStorage.getItem("attempts")) || {}; // LÆ°u sá»‘ láº§n thá»­ cho tá»«ng cÃ¢u

        function loadLevel() {
            document.getElementById("level-title").innerText = `Nhiá»‡m vá»¥ Level ${currentLevel + 1}`;
            document.getElementById("level-desc").innerText = levels[currentLevel].desc;
            document.getElementById("codeInput").value = ""; // XÃ³a Ä‘Ã¡p Ã¡n cÅ©
            document.getElementById("score").innerText = `Äiá»ƒm: ${score} | CÃºp: ${Math.floor(score / 10)}`;
        }

        function normalizeString(str) {
            return str.replace(/\s+/g, '').toLowerCase(); // Bá» dáº¥u cÃ¡ch vÃ  chuyá»ƒn vá» chá»¯ thÆ°á»ng
        }

        function checkAnswer() {
            let userCode = normalizeString(document.getElementById("codeInput").value.trim());
            let correctAnswer = normalizeString(levels[currentLevel].answer);

            // TÄƒng sá»‘ láº§n thá»­ cho cÃ¢u hiá»‡n táº¡i
            attempts[currentLevel] = (attempts[currentLevel] || 0) + 1;

            if (userCode === correctAnswer) {
                if (attempts[currentLevel] === 1) {
                    score += 10; // Láº§n Ä‘áº§u Ä‘Ãºng Ä‘Æ°á»£c 10 Ä‘iá»ƒm
                } else {
                    score += 5; // Tá»« láº§n thá»© 2 trá»Ÿ lÃªn Ä‘Ãºng Ä‘Æ°á»£c 5 Ä‘iá»ƒm
                }
                localStorage.setItem("score", score);
                document.getElementById("result").innerHTML = "ğŸ‰ ÄÃºng rá»“i! Báº¡n Ä‘Ã£ má»Ÿ khÃ³a Level tiáº¿p theo!";
                currentLevel++;
                localStorage.setItem("level", currentLevel);
                localStorage.setItem("attempts", JSON.stringify(attempts)); // LÆ°u sá»‘ láº§n thá»­
                if (currentLevel < levels.length) {
                    loadLevel();
                } else {
                    document.getElementById("result").innerHTML += " ğŸ† Báº¡n Ä‘Ã£ hoÃ n thÃ nh khÃ³a há»c!";
                }
            } else {
                document.getElementById("result").innerHTML = "âŒ Sai! HÃ£y thá»­ láº¡i!";
            }
            document.getElementById("score").innerText = `Äiá»ƒm: ${score} | CÃºp: ${Math.floor(score / 10)}`;
        }

        loadLevel();
    </script>
</body>
</html>
